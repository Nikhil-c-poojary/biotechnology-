<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Blood Grouping — Lab Report</title>
<style>
  :root{
    --bg:#f3f7fb;
    --card:#ffffff;
    --muted:#6b7280;
    --accent:#06b6d4;
    --accent-2:#10b981;
    --danger:#ef4444;
    --radius:14px;
    --maxw:1080px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Segoe UI", Roboto, system-ui, -apple-system;
    background: linear-gradient(140deg,#e6f7ff 0%, #f6fff6 60%);
    color:#0f172a;
    padding:16px;
    display:flex;justify-content:center;
  }
  .wrap{width:100%;max-width:var(--maxw)}
  header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;margin-bottom:14px}
  .brand{display:flex;gap:10px;align-items:center}
  .logo{
    width:50px;height:50px;border-radius:12px;display:grid;place-items:center;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    font-weight:bold;color:#fff
  }
  h1{margin:0;font-size:20px}
  .meta{color:var(--muted);font-size:13px}
  button{
    border:0;padding:10px 14px;border-radius:10px;background:var(--card);
    box-shadow:0 4px 12px rgba(15,23,42,0.08);cursor:pointer;font-weight:600;
  }
  button.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white}
  .grid{display:grid;grid-template-columns:320px 1fr;gap:14px}
  .card{
    background:var(--card);padding:16px;border-radius:var(--radius);
    box-shadow:0 6px 20px rgba(15,23,42,0.06);
  }
  .section-title{font-weight:600;margin-bottom:6px}
  .small{font-size:13px;color:var(--muted)}
  textarea{width:100%;min-height:80px;border-radius:8px;border:1px solid #e5e7eb;padding:8px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px solid #e5e7eb;font-size:14px}
  th{background:#f9fafb;text-align:left}
  select,input[type=text]{padding:6px;border-radius:6px;border:1px solid #dbeafe;width:100%}
  .stat{background:#f9fafb;padding:10px;border-radius:10px;flex:1;text-align:center}
  .stat strong{display:block;font-size:18px}
  .charts{display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
  canvas{background:transparent;max-width:100%;height:auto;border-radius:8px}
  footer{text-align:center;font-size:12px;color:var(--muted);margin-top:12px}
  @media(max-width:860px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">

  <header>
    <div class="brand">
      <div class="logo">BT</div>
      <div>
        <h1>Blood Grouping — Lab Report</h1>
        <div class="meta">2nd B.Sc. Biotechnology — Practical</div>
      </div>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <button onclick="window.print()">Print</button>
      <button class="primary" id="autoFillBtn">Auto-fill sample</button>
    </div>
  </header>

  <div class="grid">
    <!-- Left column -->
    <aside>
      <div class="card">
        <div class="section-title">Procedure</div>
        <div class="small">
          1. Mark three circles on a clean slide: A, B, D.<br>
          2. Sterilize fingertip, prick with lancet, discard first drop.<br>
          3. Place drops of blood: add anti-A to A, anti-B to B, anti-D to D.<br>
          4. Mix with separate toothpicks, observe agglutination.<br>
          5. Conclude ABO group and Rh phenotype.
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <div class="section-title">Observation / Result</div>
        <textarea id="shortConclusion">Most common blood group observed: O. Most common Rh phenotype: Rh positive.</textarea>
      </div>
    </aside>

    <!-- Right column -->
    <main>
      <div class="card">
        <div class="section-title">Student Data</div>
        <div style="margin-bottom:8px;font-size:13px;color:#6b7280">Enter student names and ABO / Rh values</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
          <button onclick="addEmptyRow()">Add row</button>
          <button onclick="clearTable()">Clear</button>
          <button onclick="computeAndRender()">Compute stats</button>
        </div>
        <div style="overflow:auto;max-height:280px">
          <table id="studentsTable">
            <thead><tr><th>#</th><th>Name</th><th>ABO</th><th>Rh</th><th>Remove</th></tr></thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <div class="section-title">Percent Frequencies</div>
        <div id="statsArea" style="display:flex;flex-wrap:wrap;gap:10px;margin-top:8px">
          <div class="stat" id="statA"><small>A</small><strong>—</strong></div>
          <div class="stat" id="statB"><small>B</small><strong>—</strong></div>
          <div class="stat" id="statAB"><small>AB</small><strong>—</strong></div>
          <div class="stat" id="statO"><small>O</small><strong>—</strong></div>
          <div class="stat" id="statRhPos"><small>Rh +</small><strong>—</strong></div>
          <div class="stat" id="statRhNeg"><small>Rh −</small><strong>—</strong></div>
        </div>
        <div class="charts" style="margin-top:12px">
          <canvas id="barChart" width="360" height="220"></canvas>
          <canvas id="pieChart" width="220" height="220"></canvas>
        </div>
      </div>
    </main>
  </div>

  <footer>Prepared for Lab Record — Blood grouping practical</footer>
</div>

<script>
// create row
const tbody=document.getElementById("tbody");
function addEmptyRow(name="",abo="O",rh="+"){
  const idx=tbody.children.length+1;
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td>${idx}</td>
    <td><input type="text" value="${name}"></td>
    <td><select><option${abo==="A"?" selected":""}>A</option><option${abo==="B"?" selected":""}>B</option><option${abo==="AB"?" selected":""}>AB</option><option${abo==="O"?" selected":""}>O</option></select></td>
    <td><select><option${rh==="+"?" selected":""}>+</option><option${rh==="-"?" selected":""}>-</option></select></td>
    <td><button onclick="removeRow(this)">X</button></td>`;
  tbody.appendChild(tr);
}
function removeRow(btn){btn.closest("tr").remove();reindex();computeAndRender();}
function reindex(){[...tbody.children].forEach((r,i)=>r.children[0].textContent=i+1);}
function clearTable(){tbody.innerHTML="";computeAndRender();}

// sample 3 data
document.getElementById("autoFillBtn").onclick=()=>{
  clearTable();
  [["preson A","O","+"],["person B","A","+"],["person C","B","-"]].forEach(r=>addEmptyRow(...r));
  computeAndRender();
};

// compute
function computeAndRender(){
  const rows=[...tbody.children];
  const total=rows.length;
  const counts={A:0,B:0,AB:0,O:0,rhPos:0,rhNeg:0};
  rows.forEach(tr=>{
    const abo=tr.querySelectorAll("select")[0].value;
    const rh=tr.querySelectorAll("select")[1].value;
    counts[abo]++; rh==="+"?counts.rhPos++:counts.rhNeg++;
  });
  function pct(n){return total?Math.round(n/total*100):0;}
  document.querySelector("#statA strong").textContent=total?pct(counts.A)+"%":"—";
  document.querySelector("#statB strong").textContent=total?pct(counts.B)+"%":"—";
  document.querySelector("#statAB strong").textContent=total?pct(counts.AB)+"%":"—";
  document.querySelector("#statO strong").textContent=total?pct(counts.O)+"%":"—";
  document.querySelector("#statRhPos strong").textContent=total?pct(counts.rhPos)+"%":"—";
  document.querySelector("#statRhNeg strong").textContent=total?pct(counts.rhNeg)+"%":"—";
  drawBarChart([counts.A,counts.B,counts.AB,counts.O]);
  drawPieChart([counts.A,counts.B,counts.AB,counts.O]);
}

// charts
function drawBarChart(values){
  const c=document.getElementById("barChart"),ctx=c.getContext("2d");
  ctx.clearRect(0,0,c.width,c.height);
  const labels=["A","B","AB","O"],colors=["#06b6d4","#10b981","#f59e0b","#7c3aed"];
  const max=Math.max(...values,1),margin=30,barW=(c.width-2*margin)/values.length*0.6;
  values.forEach((v,i)=>{
    const x=margin+i*( (c.width-2*margin)/values.length)+10;
    const h=(v/max)*(c.height-2*margin);
    const y=c.height-margin-h;
    ctx.fillStyle=colors[i];ctx.fillRect(x,y,barW,h);
    ctx.fillStyle="#111";ctx.fillText(labels[i],x+barW/3,c.height-10);
    ctx.fillText(v,x+barW/3,y-4);
  });
}
function drawPieChart(values){
  const c=document.getElementById("pieChart"),ctx=c.getContext("2d");
  ctx.clearRect(0,0,c.width,c.height);
  const total=values.reduce((a,b)=>a+b,0)||1;
  const colors=["#06b6d4","#10b981","#f59e0b","#7c3aed"];
  let start=-Math.PI/2; const cx=c.width/2,cy=c.height/2,r=90;
  values.forEach((v,i)=>{
    const angle=v/total*2*Math.PI;
    ctx.beginPath();ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,r,start,start+angle);ctx.closePath();
    ctx.fillStyle=colors[i];ctx.fill();
    if(v>0){
      const mid=start+angle/2;
      const lx=cx+Math.cos(mid)*(r+20),ly=cy+Math.sin(mid)*(r+20);
      ctx.fillStyle="#111";ctx.fillText(labels[i]+" "+Math.round(v/total*100)+"%",lx-10,ly);
    }
    start+=angle;
  });
}
const labels=["A","B","AB","O"];
computeAndRender();
</script>
</body>
</html>

